
var CommonData = {};
// Cookie varants

var mockCookieValue = '';

// Test order varants

// var testOrderUrl = '';
// var testTrans = '';
// var testTransValue = '';
// var nMae = '';
// var nMaeValue = '';
// var wafBypass = '';
// var wafBypassValue = '';
// var testingGlobalOffers = '';
// var testingGlobalOffersValue = '';
// var byPassAkamai = '';
// var byPassAkamaiValue = '';
// var byPassAkamaiFalse = '';
// var byPassAkamaiValueFalse = '';
// var showErrors = '';
// var showErrorsValues = '';
// var elcSiteMicroServices = '';
// var byPassVarnish = '';
// var bypassVarnishValue = '';
// var mockPay = '';
// var rcoGhost = '';
// var rcoGhostValue = '';
// var vulcanize = '';
// var vulcanizeValue = '';
// var addProdToCart = '';

// Prodcat url varants
var randomSkuUrl = '';
var productLink = '';
var productUrl = '';
var isShoppable = '';
var isDisplayable = '';
var sppUrl = '';
var noDisplayableProductError = '';
var notAvailableProductsCount = 0;

// Popups varants
var timeoutSetting = '';
var pollingTime = '';
var existsTimeout = '';
var delayTime = '';
var cookieRejectButton = '';
var closePopUp = '';
var waitTimeFiveK = '';
var waitTimeThreeK = '';
var magicNumTen = '';
var magicNumThree = '';
var magicNumTwelve = '';

// Hub site varants
var countryName = '';
var chooseHubSiteLanguage = '';
var chooseLocaleButton = '';

// Guest/New User Details varants

var guestUserTab = '';
var guestUserId = '';
var guestUserContinueButton = '';
var newUserPassword = '';
var signupRegisterTermsCondition = '';

// SPP varants
var addToBagSPP = '';
var sppPageContent = '';
var sppPageContentMob = '';
// var clickAddToBagInSPP = '';

// Bag Icon varants
var clickCartPageLink = '';
var clickCartPageLinkMob = '';

// Cart Page varants

var chkContBtn = '';
var chkout1stSampCntBtn = '';
var chkout2ndSampCntBtn = '';
var chkout3rdSampCntBtn = '';
var cartPageURLText = '';
var emptyCartErrorMsgPC = '';
var emptyCartErrorMsgMob = '';
var cartCountValue = '';

// Fedral docnumber varants

var generateFederalDocNumber = '';
var federalGeneratorUrl = '';
var enterFedralDocNumber = '';


// Shipping Details varants

var titleRadBtn = '';
var titleDropDown = '';
var enterFirstName = '';
var enterLastName = '';
var selectCntryDD = '';
var rtrnUsrSelCntryDD = '';
var selCntryWSTAG = '';
var enterAddress1 = '';
var clickAddr1DD = '';
var clickAddr1DDVal = '';
var enterAddress2 = '';
var clickAddr2DD = '';
var clickAddr2DDVal = '';
var enterZipCode = '';
var clickZipCodeButton = '';
var enterPhone = '';
var enterCity = '';
var enterCity1 = '';
var state = '';
var clickProvinceDD = '';
var clickProvinceValue = '';
var enterAddress3 = '';
var cityDropDown = '';
var clickAddr3DD = '';
var clickAddr3DDVal = '';
var enterAddress4 = '';
var regionDropDown = '';
var clickAddr4DD = '';
var clickAddr4DDVal = '';
var shipPgTnC = '';
var clickDelivAddrDD = '';
var clickDelivAddrVal = '';
var PressTab = '';
var clickSelectState = '';
var clickAddr1DDWEM = '';
var clickAddr1DDWEMVal = '';
var shipDetContBtn = '';
var retUsrShipDetContBtn = '';

//  Return User add new address varants

var returnUserLink = '';
var returnUserId = '';
var returnUserPassword = '';
var returnUserSigninButton = '';
var mobReturnUserLink = '';

// Order Review details varants

var orderRevDetContBtn = '';
var selectPaymentMethod = '';
var selectPayMethodDD = '';
var orderRevDetTermsCond = '';
var orderRevDetContToPayPage = '';
var selectPaymentMethod1 = '';
var billingPageTermsCond = '';
var orderRevcontinueToPayPage = '';
var codOrderBtn = '';
var selectCreditCardType = '';


// Mobile Shipping Details

var mobTitleRadBtn = '';
var mobTitleDropDown = '';
var mobRuTitleDropDown = '';
var mobEnterFirstName = '';
var mobEnterLastName = '';
var mobSelCntryDD = '';
var mobRtrnUsrSelCntryDD = '';
var mobSelCntryWSTAG = '';
var mobEnterAddress1 = '';
var mobAddr1DD = '';
var mobClickAddr1DD = '';
var mobClickAddr1DDVal = '';
var mobEnterAddress2 = '';
var mobAddr2DD = '';
var mobClickAddr2DD = '';
var mobClickAddr2DDVal = '';
var mobEnterZipCode = '';
var mobEnterPhone = '';
var mobEnterCity = '';
var mobEnterCity1 = '';
var mobState = '';
var mobClickProvinceDD = '';
var mobClickProvinceValue = '';
var mobEnterAddress3 = '';
var mobCityDropDown = '';
var mobAddr3DD = '';
var mobClickAddr3DD = '';
var mobClickAddr3DDVal = '';
var mobEnterAddress4 = '';
var mobRegionDropDown = '';
var mobAddr4DD = '';
var mobClickAddr4DD = '';
var mobClickAddr4DDVal = '';
var mobShipPgTnC = '';
var shippingBillingAddressCheckbox = '';


// Mobile Order review varants

var mobOrdRevDetContBtn = '';
var mobSelPayMethod = '';
var mobSelPayMethodDD = '';
var mobOrdRevDetTAndC = '';
var mobOrdRevDetContToPayPage = '';
var mobSelPayMethod1 = '';
var mobSelPayDDMethod1 = '';
var mobBillPageTAndC = '';
var mobContToPayPage = '';


// Cart Merge varants

var cartMergeCheckout = '';
var cartMergeSampContBtn = '';
var retUserShipDetEditLink = '';
var retUserAddNewAddress = '';

var retUserChkOrdRevDetContBtn = '';
var retUserOrdRevDetTAndC = '';
var retUserOrdRevDetToPayPage = '';
var retUserSelPayMethod = '';
var retUserBillPageTAndC = '';
var retUserBillRevDetToPayPage = '';


var creditCardDetails = '';
var enterCreditCardNumber = '';
var getCreditcardValue = '';
var enterCvvNumber = '';
var creditCardIdNumber = '';
var enterTextMonth = '';
var enterTextYear = '';
var enterCardHolderName = '';
var selectMobileMonth = '';
var selectMobileYear = '';
var enterMonthYear = '';
var enterCcNumber = '';
var entAdyenKbdCCDetails = '';
var entKbdCCDetails = '';
var paymentTermsCond = '';
var clickCreditCardContBtn = '';


var newuserSignInDetails = '';
var registerNow = '';
var signupRegisterPassword = '';
var signupRegisterPhone = '';
var signupRegisterTermsCond = '';
var signupCreateAccount1 = '';

var mobShipDetContBtn = '';
var mobRetUsrShipDetContBtn = '';
var mobRetUsrOrdRevDetContBtn = '';
var mobRetUsrOrdDetTAndC = '';
var mobRetUsrOrdDetToPayPage = '';
var mobRetUsrSelPayMethod = '';
var mobRetUsrSelPayMethodDD = '';
var mobRetUsrBillPageTAndC = '';
var mobRetUsrToPayPage = '';
var mobRetUsrSelPayMethod1 = '';
var mobRetUsrSelPayMethodDD1 = '';
var mobRetUsrBillRevPageTAndC = '';
var mobRetUsrBillRevDetToPayPage = '';

var orderConfirmationMsgid = '';

var accountConfirmAssert = '';
var mobAccountConfirmAssert = '';

var selectQtyDropDown = '';
var removeProduct = '';
var cartProductPath = '';
var cartEmptyMsgId = '';

var clickLogInLink = '';
var accountRegisterNow = '';
var accountRegistrationFirstName = '';
var accountRegistrationLastName = '';
var accountRegisterPhone = '';
var accountRegisterEmailId = '';
var accountRegisterPWD = '';
var accountRegisterationTerms = '';
var accountRegisterButton = '';
var accountLoggedinUserNameLink = '';
var addressBook = '';
var addNewAddressButton = '';

var acTitle = '';
var acTitleDropDown = '';
var acEnterFirstname = '';
var acEnterLastName = '';
var acEnterAddress1 = '';
var acAddress1DropDown = '';
var acEnterAddress2 = '';
var acAddress2DropDown = '';
var acEnterZipCode = '';
var acClickZipCodeButton = '';
var acEnterPhone = '';
var acSelectCountryID = '';
var acEnterCity = '';
var acState = '';
var acEnterAddress3 = '';
var acAddress3DropDown = '';
var acEnterAddress4 = '';
var acAddress4DropDown = '';
var acClickCityDropDown = '';
var acClickCityDDValue = '';
var acClickStateDropDown = '';
var acClickStateDDValue = '';
var acClickCountryDropDown = '';
var acClickCountryDDValue = '';
var acClickAvenueDropDown = '';
var acClickAvenueDDValue = '';

var accAddrSubmitBtn = '';
var accRetUsrAddrSubmitBtn = '';


var acSignoutButton = '';
var acMobSignoutButton = '';
var acSignoutAssert = '';
var acMobLogo = '';
var acMobileHamburgerIcon = '';
var acMobileHamburgerMenu = '';
var acMobileLoginLink = '';
var acMobileHamburgerIconAfterLogin = '';
var acMobileLoginLinkAfterSignup = '';
var acMobProfileLink = '';
var acMobLoggedInProfileLink = '';
var acMobShipmentLink = '';
var acMobShipmentLink1 = '';
var acMobNewUserAddNewAddress = '';

var needToClickLogInLinkAgain = '';
var accountReturnUserEmailId = '';
var accountReturnUserPWD = '';
var accountReturnUserLoginButton = '';

var acMobNeedToClickLogInLinkAgain = '';
var acMyOder = '';
var accMyOderReviewDetails = '';

var acDeleteAddress = '';
var acDeleteAddressConfirm = '';

var accountAddNewAddress = '';
var accountAddNewAddressClickMethod = '';
var standardDevliveryAddress = '';
var acMobMyOder = '';
var acMobMyOder1 = '';
var acMyOderAccordion = '';
var acMobMyOderReviewDetails = '';
var acMobDeleteAddress = '';
var acMobDeleteAddressPopup = '';
var acMobDeleteAddressConfirm = '';

var acMobAddNewAddress = '';
var acEditAddress = '';
var acEditFirstName = '';
var acEditLastName = '';
var editAddressSubmitButton = '';
var acMobEditAddress = '';
var acMobEditAddressSubmitButton = '';
var acMobRegisterNow = '';


var mobAccountRegisterationTerms = '';
var acMobRegisterButton = '';
var acMobAddNewAddressSubmitButton = '';
var acMobRegisterContinueButton = '';
var acMobBackLink = '';

var strValues = 'abcdefghijk12345678';
var userNameDomain = '@test';
var topLevelDomain = '.com';
var FederalDocNumber = '';

// Array Declaration
var skuIds = [];
var returnUserIds = [];
var accountReturnUserIds = [];
var chkoutContSampPage = [];
var guestUserNewUserDetails = [];
var returnUserLoginLink = [];
var returnUserDetails = [];
var cartMrgAddDet = [];
var checkBoxShippingBillingAddress = [];
var guestShipContBtn = [];
var retUserShipContBtn = [];
var mobGuestShipContBtn = [];
var mobRetUserShipContBtn = [];
var shipAddrDetails = [];
var mobShipAddrDetails = [];
var orderRevPayDets = [];
var mobOrderRevPayDets = [];
var retUserCOReviewDets = [];
var mobRetUserOrdRevPayDets = [];
var newUsrSignInDetails = [];
var mobReturnUserLoginLink = [];
// Account
var newAccRegDets = [];
var accNewUserProfileLinks = [];
var accNewUserShipDetails = [];
var accMobNewUserHamIconLinks = [];
var accMobNewUserHamMenuLinks = [];
// Hamburger  Links reusable
var accMobNewUserHamLinks = [];
var accMobShipLinks = [];
var accClickAlreadyUserLink = [];
var accRetUserDetails = [];
var accMobClickAlreadyUserLink = [];
var accProfFuncDetails = [];
var newUserMobRegDetails = [];
var accAddrSubmitButton = [];
var accRetUsrAddrSubmitButton = [];
var mobAccAddAddrSubmitBtn = [];
var accProfMyOrdDetails = [];
var accProfDeleteAddrDetails = [];
var AccountEditAddressDetails = [];
var mobAccountEditAddressDetails = [];
var stdDelChkBox = [];
var accMobBackToProfileLink = [];

var t = require('taiko');
const Helper = require('../../helpers/helper.js');
const Util = require('../../../../utilities/util.js');
const assert = require('assert');

const Hengine = require('../../../../datainterface/providers/hengine.js');
const taikoOverride = require('../../helix_taiko.js');
const gen = require('../../tests/ReUsableFunction.js');
const feature = 'Checkout';

const commonMessages = {
  validateCartMessage:
    'In the first iteration the product was not added, so go for second iteration.',
  validateCartMessageError:
    'After the 2nd iteration, the product was not added to the basket.',
  accountSignoutMsgActual: 'Actual Sign out message: ',
  accountSignoutMsgExpected: 'Expected Sign out message: ',
  actSignOutMsg: 'signed out succesfully',
  actErrorSignOutMsg: 'not signed out succesfully ',
  orderSuccessMsg: 'Order placed successfully',
  orderFailSuccessMsg: 'Order not placed',
  stepNotApplicable: 'Step is not applicable for this Brand/Locale',
  acctCreatedSuccess: 'Account created successfully',
  acctCreatedFail: 'Account not created',
};
const matchCondition = true;
const responseCode = 200;

let Noproductincart = 0;
let CreditCardDetailsFlag = 0;
let siteDefinition, source, NullDataException, tags;
// isDiscovery = true;
// doHeal = true;

function randomMailIds() {
  let strEmail = "";
  let strTmp;
  for (let i = 0; i < parseInt(magicNumTen); i++) {
    strTmp = strValues.charAt(Math.round(strValues.length * Math.random()));
    strEmail = strEmail + strTmp;
  }
  strEmail = strEmail + userNameDomain + topLevelDomain;
  return strEmail;
}

function returnUserMailIds() {
  return returnUserIds[Math.floor(Math.random() * returnUserIds.length)];
}

function accountReturnUserMailIds() {
  return accountReturnUserIds[Math.floor(Math.random() * accountReturnUserIds.length)];
}

function reinitialize() {
  skuIds = [
    CommonData.skuId1,
    CommonData.skuId2,
    CommonData.skuId3,
    CommonData.skuId4,
    CommonData.skuId5,
    CommonData.skuId6,
    CommonData.skuId7,
    CommonData.skuId8,
    CommonData.skuId9,
    CommonData.skuId10,
  ];

  returnUserIds = [
    CommonData.RID1,
    CommonData.RID2,
    CommonData.RID3,
    CommonData.RID4,
    CommonData.RID5,
    CommonData.RID6,
    CommonData.RID7,
    CommonData.RID8,
    CommonData.RID9,
    CommonData.RID10,
    CommonData.RID11,
    CommonData.RID12,
    CommonData.RID13,
    CommonData.RID14,
    CommonData.RID15,
  ];

  accountReturnUserIds = [
    CommonData.ACRID1,
    CommonData.ACRID2,
    CommonData.ACRID3,
    CommonData.ACRID4,
    CommonData.ACRID5,
    CommonData.ACRID6,
    CommonData.ACRID7,
    CommonData.ACRID8,
    CommonData.ACRID9,
    CommonData.ACRID10,
  ];

  chkoutContSampPage = [
    { loc: chkContBtn, action: "click" },
    { loc: chkout1stSampCntBtn, action: "tryCatchClick" },
    { loc: chkout2ndSampCntBtn, action: "tryCatchClick" },
    { loc: chkout3rdSampCntBtn, action: "tryCatchClick" },
  ];

  guestUserNewUserDetails = [
    { loc: guestUserTab, action: "click" },
    { loc: guestUserId, data: randomMailIds(), action: "pressKeysWrite" },
    { loc: newUserPassword, data: CommonData.NPWD, action: "write" },
    { loc: signupRegisterTermsCondition, action: "click" },
    { action: "screenshot" },
    { loc: guestUserContinueButton, action: "click" },
    { loc: enterFirstName, action: "waitForelementtoappear" },
  ];

  returnUserLoginLink = [
    { loc: returnUserLink, action: "click" },
  ];

  returnUserDetails = [
    { loc: returnUserId, data: returnUserMailIds(), action: "write" },
    { loc: returnUserPassword, data: CommonData.RPWD, action: "write" },
    { action: "screenshot" },
    { loc: returnUserSigninButton, action: "click" },
  ];

  cartMrgAddDet = [
    { loc: cartMergeCheckout, action: "tryCatchClick" },
    { loc: cartMergeSampContBtn, action: "tryCatchClick" },
    { loc: retUserShipDetEditLink, action: "click" },
    { loc: retUserAddNewAddress, action: "click" },
  ];

  shipAddrDetails = [
    { loc: titleRadBtn, action: "click" },
    { loc: titleDropDown, data: CommonData.TITLE, action: "IDDropdown" },
    { loc: enterFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: enterLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: selectCntryDD, data: CommonData.SELECTCOUNTRYID, action: "IDDropdowntxtTrycatch" },
    { loc: rtrnUsrSelCntryDD, data: CommonData.SELECTCOUNTRYID, action: "IDDropdowntxtTrycatch" },
    { loc: selCntryWSTAG, data: CommonData.CITY, action: "Dropdownwithoutselecttag" },
    { loc: enterAddress1, data: CommonData.ADDRESS1, action: "write" },
    { loc: clickAddr1DD, action: "click" },
    { loc: clickAddr1DDVal, action: "click" },
    { loc: clickAddr1DDWEM, action: "click" },
    { loc: clickAddr1DDWEMVal, action: "click" },
    { loc: enterAddress2, data: CommonData.ADDRESS2, action: "write" },
    { loc: clickAddr2DD, action: "click" },
    { loc: clickAddr2DDVal, action: "click" },
    { loc: clickDelivAddrDD, action: "ClickDropdownwithxpaths" },
    { loc: clickDelivAddrVal, action: "ClickDropdownwithxpaths" },
    { loc: enterZipCode, data: CommonData.ZIPCODE, action: "write" },
    { loc: clickZipCodeButton, action: "click" },
    { loc: enterPhone, data: CommonData.PHONE, action: "write" },
    { loc: clickSelectState, data: CommonData.CITY, action: "Dropdownwithoutselecttag" },
    { loc: enterCity, data: CommonData.CITY, action: "write" },
    { loc: state, data: CommonData.STATE, action: "IDDropdown" },
    { loc: clickProvinceDD, action: "ClickDropdownwithxpaths" },
    { loc: clickProvinceValue, action: "ClickDropdownwithxpaths" },
    { loc: enterAddress3, data: CommonData.ADDRESS3, action: "write" },
    { loc: cityDropDown, data: CommonData.CITYDROPDOWN, action: "NameDropDowntxt" },
    { loc: clickAddr3DD, action: "click" },
    { loc: clickAddr3DDVal, action: "click" },
    { loc: regionDropDown, data: CommonData.REGIONDROPDOWN, action: "NameDropDowntxt" },
    { loc: clickAddr4DD, action: "click" },
    { loc: clickAddr4DDVal, action: "click" },
    { loc: enterCity1, data: CommonData.CITY, action: "write" },
    { loc: enterAddress4, data: CommonData.ADDRESS4, action: "write" },
    { loc: PressTab, action: "pressTab" },
    { loc: shipPgTnC, action: "tryCatchClick" },
    { action: "screenshot" },
  ];

  guestShipContBtn = [
    { loc: enterPhone, action: "click" },
    { loc: PressTab, action: "pressTab" },
    { loc: shipDetContBtn, action: "click" },
  ];

  retUserShipContBtn = [
    { loc: retUsrShipDetContBtn, action: "click" },
  ];

  mobReturnUserLoginLink = [
    { loc: mobReturnUserLink, action: "click" },
  ];

  mobShipAddrDetails = [
    { loc: mobTitleRadBtn, action: "click" },
    { loc: mobTitleDropDown, data: CommonData.TITLE, action: "IDDropdowntxtTrycatch" },
    { loc: mobRuTitleDropDown, data: CommonData.TITLE, action: "IDDropdowntxtTrycatch" },
    { loc: mobEnterFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: mobEnterLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: mobSelCntryDD, data: CommonData.SELECTCOUNTRYID, action: "IDDropdowntxtTrycatch" },
    { loc: mobRtrnUsrSelCntryDD, data: CommonData.SELECTCOUNTRYID, action: "IDDropdowntxtTrycatch", },
    { loc: mobSelCntryWSTAG, data: CommonData.CITY, action: "Dropdownwithoutselecttag" },
    { loc: mobEnterAddress1, data: CommonData.ADDRESS1, action: "write" },
    { loc: mobAddr1DD, data: CommonData.MOBAddress1DDValue, action: "IDDropdown" },
    { loc: mobClickAddr1DD, action: "click" },
    { loc: mobClickAddr1DDVal, action: "click" },
    { loc: clickAddr1DDWEM, action: "click" },
    { loc: clickAddr1DDWEMVal, action: "click" },
    { loc: mobEnterAddress2, data: CommonData.ADDRESS2, action: "write" },
    { loc: mobAddr2DD, data: CommonData.MOBAddress1DDValue, action: "IDDropdown" },
    { loc: mobClickAddr2DD, action: "click" },
    { loc: mobClickAddr2DDVal, action: "click" },
    { loc: mobEnterZipCode, data: CommonData.ZIPCODE, action: "write" },
    { loc: mobEnterPhone, data: CommonData.PHONE, action: "write" },
    { loc: clickSelectState, data: CommonData.CITY, action: "Dropdownwithoutselecttag" },
    { loc: mobEnterCity, data: CommonData.CITY, action: "write" },
    { loc: mobEnterCity1, data: CommonData.CITY, action: "write" },
    { loc: mobState, data: CommonData.STATE, action: "IDDropdown" },
    { loc: mobClickProvinceDD, action: "ClickDropdownwithxpaths" },
    { loc: mobClickProvinceValue, action: "ClickDropdownwithxpaths" },
    { loc: mobEnterAddress3, data: CommonData.ADDRESS3, action: "write" },
    { loc: mobAddr3DD, data: "2", action: "IndexDropDownID" },
    { loc: mobCityDropDown, data: CommonData.CITYDROPDOWN, action: "NameDropDowntxt" },
    { loc: mobClickAddr3DD, action: "click" },
    { loc: mobClickAddr3DDVal, action: "click" },
    { loc: mobRegionDropDown, data: CommonData.REGIONDROPDOWN, action: "NameDropDowntxt" },
    { loc: mobAddr4DD, data: "1", action: "IndexDropDownID" },
    { loc: mobClickAddr4DD, action: "click" },
    { loc: mobClickAddr4DDVal, action: "click" },
    { loc: mobEnterAddress4, data: CommonData.ADDRESS4, action: "write" },
    { loc: PressTab, action: "pressTab" },
    { loc: mobShipPgTnC, action: "tryCatchClick" },
    { action: "screenshot" },
  ];

  checkBoxShippingBillingAddress = [
    { loc: shippingBillingAddressCheckbox, action: "checkTheCheckBox" },
  ];

  mobGuestShipContBtn = [
    { loc: mobEnterPhone, action: "click" },
    { loc: PressTab, action: "pressTab" },
    { loc: mobShipDetContBtn, action: "click" },
  ];

  mobRetUserShipContBtn = [
    { loc: mobRetUsrShipDetContBtn, action: "click" },
  ];

  orderRevPayDets = [
    { loc: orderRevDetContBtn, action: "click" },
    { loc: selectPaymentMethod, action: "click" },
    { loc: selectPayMethodDD, data: CommonData.CARDTYPE, action: "IDDropdown" },
    { loc: orderRevDetTermsCond, action: "click" },
    { loc: orderRevDetContToPayPage, action: "click" },
    { loc: codOrderBtn, action: "click" },
    { loc: selectPaymentMethod1, action: "click" },
    { loc: billingPageTermsCond, action: "click" },
    { loc: orderRevcontinueToPayPage, action: "click" },
    { loc: selectCreditCardType, action: "click" },
    { action: "screenshot" },
  ];

  mobOrderRevPayDets = [
    { loc: mobOrdRevDetContBtn, action: "click" },
    { loc: mobSelPayMethod, action: "click" },
    { loc: mobSelPayMethodDD, data: CommonData.CARDTYPE, action: "IDDropdown" },
    { loc: mobOrdRevDetTAndC, action: "click" },
    { loc: mobOrdRevDetContToPayPage, action: "click" },
    { loc: codOrderBtn, action: "click" },
    { loc: mobSelPayMethod1, action: "click" },
    { loc: mobSelPayDDMethod1, data: CommonData.CARDTYPE, action: "IDDropdown" },
    { loc: mobBillPageTAndC, action: "click" },
    { loc: mobContToPayPage, action: "click" },
    { loc: selectCreditCardType, action: "click" },
    { action: "screenshot" },

  ];

  retUserCOReviewDets = [
    { loc: retUserChkOrdRevDetContBtn, action: "click" },
    { loc: retUserOrdRevDetTAndC, action: "click" },
    { loc: retUserOrdRevDetToPayPage, action: "click" },
    { loc: retUserSelPayMethod, action: "click" },
    { loc: retUserBillPageTAndC, action: "click" },
    { loc: retUserBillRevDetToPayPage, action: "click" },
    { loc: codOrderBtn, action: "click" },
    { loc: selectCreditCardType, action: "click" },
    { action: "screeshot" },
  ];

  mobRetUserOrdRevPayDets = [
    { loc: mobRetUsrOrdRevDetContBtn, action: "click" },
    { loc: mobRetUsrOrdDetTAndC, action: "click" },
    { loc: mobRetUsrOrdDetToPayPage, action: "click" },
    { loc: mobRetUsrSelPayMethod, action: "click" },
    { loc: mobRetUsrSelPayMethodDD, data: CommonData.CARDTYPE, action: "IDDropdown" },
    { loc: mobRetUsrBillPageTAndC, action: "click" },
    { loc: mobRetUsrToPayPage, action: "click" },
    { loc: codOrderBtn, action: "click" },
    { loc: mobRetUsrSelPayMethod1, action: "click" },
    { loc: mobRetUsrSelPayMethodDD1, data: CommonData.CARDTYPE, action: "IDDropdown" },
    { loc: mobRetUsrBillRevPageTAndC, action: "click" },
    { loc: mobRetUsrBillRevDetToPayPage, action: "click" },
    { loc: selectCreditCardType, action: "click" },
    { action: "screenshot" },
  ];

  newUsrSignInDetails = [
    { loc: newuserSignInDetails },
    { loc: registerNow, action: "click" },
    { loc: signupRegisterPassword, data: CommonData.NPWD, action: "write" },
    { loc: signupRegisterPhone, data: CommonData.PHONE, action: "write" },
    { loc: signupRegisterTermsCond, action: "click" },
    { loc: signupCreateAccount1, action: "click" },
  ];

  newAccRegDets = [
    { loc: closePopUp, action: "tryCatchClick" },
    { loc: clickLogInLink, action: "click" },
    { loc: accountRegisterNow, action: "click" },
    { loc: accountRegistrationFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: accountRegistrationLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: accountRegisterPhone, data: CommonData.PHONE, action: "write" },
    { loc: accountRegisterEmailId, data: randomMailIds(), action: "write" },
    { loc: accountRegisterPWD, data: CommonData.NPWD, action: "write" },
    { loc: accountRegisterationTerms, action: "click" },
    { loc: accountRegisterButton, action: "click" },
    { action: "screenshot" },
  ];

  accNewUserProfileLinks = [
    { loc: accountLoggedinUserNameLink, action: "click" },
    { loc: addressBook, action: "click" },
    { loc: addNewAddressButton, action: "click" },
    { action: "screenshot" },
  ];

  accNewUserShipDetails = [
    { loc: acTitle, action: "tryCatchClick" },
    { loc: acTitleDropDown, data: CommonData.ACCTITLE, action: "IDDropdowntxtTrycatch" },
    { loc: acEnterFirstname, data: CommonData.FIRSTNAME, action: "write" },
    { loc: acEnterLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: selCntryWSTAG, data: CommonData.CITY, action: "Dropdownwithoutselecttag" },
    { loc: acEnterAddress1, data: CommonData.ADDRESS1, action: "write" },
    { loc: acAddress1DropDown, data: CommonData.MOBAddress1DDValue, action: "IDDropdown" },
    { loc: acEnterAddress2, data: CommonData.ADDRESS2, action: "write" },
    { loc: acAddress2DropDown, data: CommonData.MOBAddress2DDValue, action: "IDDropdown" },
    { loc: acEnterZipCode, data: CommonData.ZIPCODE, action: "write" },
    { loc: acClickZipCodeButton, action: "click" },
    { loc: acSelectCountryID, data: CommonData.SELECTCOUNTRYID, action: "IDDropdowntxtTrycatch" },
    { loc: acEnterPhone, data: CommonData.PHONE, action: "write" },
    { loc: acEnterCity, data: CommonData.CITY, action: "TryCatchWrite" },
    { loc: acState, data: CommonData.STATE, action: "IDDropdown" },
    { loc: acEnterAddress3, data: CommonData.ADDRESS3, action: "write" },
    { loc: acAddress3DropDown, data: "2", action: "IndexDropDownID" },
    { loc: acEnterAddress4, data: CommonData.ADDRESS4, action: "write" },
    { loc: acAddress4DropDown, data: "1", action: "IndexDropDownID" },
    { loc: acClickCityDropDown, action: "click" },
    { loc: acClickCityDDValue, action: "click" },
    { loc: acClickStateDropDown, action: "click" },
    { loc: acClickStateDDValue, action: "click" },
    { loc: acClickCountryDropDown, action: "click" },
    { loc: acClickCountryDDValue, action: "click" },
    { loc: acClickAvenueDropDown, action: "click" },
    { loc: acClickAvenueDDValue, action: "click" },
    { action: "screenshot" },

  ];

  accAddrSubmitButton = [
    { loc: accAddrSubmitBtn, action: "click" },
  ];

  accRetUsrAddrSubmitButton = [
    { loc: accRetUsrAddrSubmitBtn, action: "click" },
  ];

  accMobNewUserHamIconLinks = [
    { loc: acMobLogo, action: "click" },
    { loc: acMobileHamburgerIcon, action: "click" },
    { loc: acMobileHamburgerMenu, action: "click" },
    { loc: acMobileLoginLink, action: "click" },
  ];

  accMobNewUserHamMenuLinks = [
    { loc: acMobileHamburgerIcon, action: "click" },
    { loc: acMobileHamburgerIconAfterLogin, action: "click" },
    { loc: acMobileLoginLinkAfterSignup, action: "click" },
    { loc: acMobProfileLink, action: "click" },
    { loc: acMobLoggedInProfileLink, action: "click" },
    { loc: acMobShipmentLink, action: "click" },
    { loc: acMobShipmentLink1, action: "click" },
    { loc: acMobNewUserAddNewAddress, action: "click" }
  ];

  // Hamburger  Links reusable
  accMobNewUserHamLinks = [
    { loc: acMobileHamburgerIcon, action: "click" },
    { loc: acMobileHamburgerIconAfterLogin, action: "click" },
    { loc: acMobProfileLink, action: "click" },
    { loc: acMobLoggedInProfileLink, action: "click" }
  ];

  accMobBackToProfileLink = [
    { loc: acMobBackLink, action: "click" }
  ];

  accMobShipLinks = [
    { loc: acMobShipmentLink, action: "click" },
    { loc: acMobShipmentLink1, action: "click" },
  ];

  accClickAlreadyUserLink = [
    { loc: needToClickLogInLinkAgain, action: "click" },
  ];

  accRetUserDetails = [
    { loc: accountReturnUserEmailId, data: accountReturnUserMailIds(), action: "write" },
    { loc: accountReturnUserPWD, data: CommonData.RPWD, action: "write" },
    { loc: accountReturnUserLoginButton, action: "click" },
    { action: "screenshot" },
  ];

  accMobClickAlreadyUserLink = [
    { loc: acMobNeedToClickLogInLinkAgain, action: "click" },
  ];

  mobAccAddAddrSubmitBtn = [
    { loc: acMobAddNewAddressSubmitButton, action: "click" },
  ];

  accProfFuncDetails = [
    { loc: acMyOder, action: "click" },
    { loc: accMyOderReviewDetails, action: "click" },
    { action: "screenshot" },
    { loc: addressBook, action: "click" },
    { loc: acDeleteAddress, action: "click" },
    { loc: acDeleteAddressConfirm, action: "click" },
    { loc: accountAddNewAddress, action: "click" },
    { loc: accountAddNewAddressClickMethod, action: "click" },
  ];

  newUserMobRegDetails = [
    { loc: acMobRegisterNow, action: "click" },
    { loc: accountRegistrationFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: accountRegistrationLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: accountRegisterPhone, data: CommonData.PHONE, action: "write" },
    { loc: accountRegisterEmailId, data: randomMailIds(), action: "write" },
    { loc: accountRegisterPWD, data: CommonData.NPWD, action: "write" },
    { loc: mobAccountRegisterationTerms, action: "click" },
    { loc: acMobRegisterButton, action: "click" },
    { loc: acMobRegisterContinueButton, action: "click" },
    { action: "screenshot" },
  ];

  accProfMyOrdDetails = [
    { loc: acMobMyOder, action: "click" },
    { loc: acMobMyOder1, action: "click" },
    { loc: acMyOderAccordion, action: "click" },
    { loc: acMobMyOderReviewDetails, action: "click" },
    { loc: acMobLogo, action: "click" },
  ];

  accProfDeleteAddrDetails = [
    { loc: acMobDeleteAddress, action: "click" },
    { loc: acMobDeleteAddressPopup, data: CommonData.alertMessageInPopup, action: "javaScriptPopUp" },
    { loc: acMobDeleteAddressConfirm, action: "click" },
    { loc: acMobAddNewAddress, action: "click" }
  ];

  AccountEditAddressDetails = [
    { loc: acEditAddress, action: "click" },
    { loc: acEditFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: acEditLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: editAddressSubmitButton, action: "click" },
    { action: "screenshot" },
  ];

  mobAccountEditAddressDetails = [
    { loc: acMobEditAddress, action: "click" },
    { loc: acEditFirstName, data: CommonData.FIRSTNAME, action: "write" },
    { loc: acEditLastName, data: CommonData.LASTNAME, action: "write" },
    { loc: acMobEditAddressSubmitButton, action: "click" },
    { action: "screenshot" },
  ];

  stdDelChkBox = [
    { loc: standardDevliveryAddress, action: "click" },
  ];

  /* To store mail id's */
  gauge.dataStore.specStore.put('GuestUserEmail', guestUserNewUserDetails[1].data);
  gauge.dataStore.specStore.put('ReturnUserEmail', returnUserDetails[0].data);
  gauge.dataStore.specStore.put('signoutbtn', acMobSignoutButton);

}

async function initFrameworkSettings() {
  // This should come from Gauge Tags inputs
  tags = process.env.tags.split(',');
  ({ siteDefinition, source, NullDataException } = await Hengine.Initializer(
    tags,
    feature,
    this
  ));
  // Abort, if there is any error while setting up the locators and test data
  if (NullDataException.isError) {
    assert(!matchCondition, NullDataException.message.join('\n'));
  }

  // Override this
  Object.assign(this, source);
  // Taiko API overrides
  t = await Helper.initAutoHeal(siteDefinition, t);

  // Re-initialize variables
  reinitialize();

  // Delete all the cookies
  await t.deleteCookies();

  gauge.message('ENVIRONMENT : ' + siteDefinition.executionContext.environment);
}

async function store() {
  gauge.dataStore.specStore.put('Shipping', shipAddrDetails);
  gauge.dataStore.specStore.put('bagIcon', clickCartPageLink);
  gauge.dataStore.specStore.put('bagIconMob', clickCartPageLinkMob);
}

/**
* @param {*} functionName - Pass mailid's functions
*/
// async function printMailId(functionName) {
//   const emailused = functionName();
//   gauge.message(emailused);
// }

/**
 * This function used to close Cookie Reject popups
 */
async function cookiesRejectButton() {

  /** Check for pop-up **/
  try {
    await t.evaluate(await t.$(cookieRejectButton), (ele) => ele.click());
  } catch (error) {
    gauge.message(
      "Cookie Reject Button not available for this brand/locale hence the step is skipped"
    );
  }
}

/**
 * This function used to close different kind of pop-ups
 */
async function closePopUps() {

  /** Check for pop-up**/
  try {
    await t.evaluate(await t.$(closePopUp), (ele) => ele.click());
  } catch (error) {
    gauge.message(
      "pop up not available for this brand/locale hence the step is skipped"
    );
  }
}

async function gotoHomepageValidation() {
  const response = await t.goto(siteDefinition.executionContext.url, {
    waitForNavigation: false,
  });
  if (response.status.code === responseCode) {
    gauge.message('Navigated to Home page');
  } else {
    gauge.message(
      `The Homepage didn't return the 200 code, instead it returned the ${response.status.code} code, which is why it is not available`
    );
  }
  gauge.screenshot();
}

// function used to setCookies
async function configureTestSettings() {
  await t.setConfig({ navigationTimeout: parseInt(timeoutSetting, 10) },
    { selectHiddenElements: true });
  await Helper.setWindowSize(Util.ScreenSizes['1040p'], t);
  await Helper.setWAFCookie(siteDefinition, t);
  await Helper.setAdroll(siteDefinition, t);
  await Helper.setTestGlobalOffer(siteDefinition, t);
  await Helper.setAkamaiBypass(siteDefinition, t);
  await Helper.setApiEnv(siteDefinition, t);
  await Helper.setShowErrorsCookie(siteDefinition, t);
  await Helper.setVarnishBypass(siteDefinition, t);
  await Helper.setMockCookie(siteDefinition, t, mockCookieValue);
  await Helper.getPerlgemEnvCookie(siteDefinition, t);
  await Helper.setOtherCookies(siteDefinition, t);
  await Helper.setRcoGhostCookie(siteDefinition, t);
  await Helper.setRcoVulcanCookie(siteDefinition, t);
  await gotoHomepageValidation();
  // await Helper.setLocaleCookie(siteDefinition, t, localeCookie);
  await Helper.setTestOrderCookie(siteDefinition, t);
  await Helper.setRevisionTag(siteDefinition, t);
}


async function mobileEmulateDevice() {
  if (siteDefinition.executionContext.platform.toUpperCase() === 'MOBILE') {
    if (CommonData.MOBILEEMULATEDEVICE !== '') {
      await t.emulateDevice(CommonData.MOBILEEMULATEDEVICE);
      gauge.message(CommonData.MOBILEEMULATEDEVICE);
    }
  }
}

async function chooseHubSites() {
  await cookiesRejectButton();
  if (countryName !== '') {
    const tCountryName = await t.$(countryName);
    await t.evaluate(tCountryName, (ele) => ele.click());
    if (chooseHubSiteLanguage !== '') {
      const tChooseHubSiteLanguage = await t.$(chooseHubSiteLanguage);
      await t.evaluate(tChooseHubSiteLanguage, (ele) => ele.click());
      gauge.screenshot();
    }
    const tChooseLocaleButton = await t.$(chooseLocaleButton);
    if (await tChooseLocaleButton.exists()) {
      await t.evaluate(
        tChooseLocaleButton,
        (ele) => ele.click(),
        { waitForEvents: ["DOMContentLoaded"] },
        { waitForNavigation: false }
      );
    } else {
      gauge.message("Submit btn not available");
    }
  }
}

async function addProductTobagFromSPP() {
  if (addToBagSPP !== '') {
    let AddtoBagExist = 0;
    for (let i = 0; i < 2; i++) {
      const tClickAddToBagInSPP = await t.$(addToBagSPP);
      if (await tClickAddToBagInSPP.exists(parseInt(pollingTime), parseInt(existsTimeout))) {
        if (await tClickAddToBagInSPP.isDisabled() !== matchCondition) {
          await gen.focusClickAction(tClickAddToBagInSPP);
          await t.waitFor(parseInt(waitTimeFiveK));
          gauge.message("Add to Bag btn is enabled and Product added to cart");
          gauge.screenshot();
          break;
        } else {
          assert(!matchCondition, "Add to Bag btn is disabled");
        }
      } else {
        await t.reload({ waitForEvents: ["loadEventFired"] });
        gauge.message(
          "Add to Bag btn does not exist within 30 seconds, thus reloading the page."
        );
        AddtoBagExist++;
      }
    }
    if (AddtoBagExist === 2) {
      assert(!matchCondition, "Add to bag does not load within expected time and reload the page."
      );
    }
  }
}

async function clickOnBagIcon(CartpageLink) {
  let cartval = 0;
  let cartexists = 0;
  for (let i = 0; i < parseInt(magicNumThree); i++) {
    if (await (await t.$(cartCountValue)).exists(pollingTime, existsTimeout)) {
      const cartcount = await (await t.$(cartCountValue)).text();
      gauge.message("Cart count value =" + cartcount);
      if (!(parseInt(cartcount) === 0 || cartcount === "")) {
        assert(true);
        await t.evaluate(
          await t.$(CartpageLink, { waitForEvents: ["loadEventFired"] }),
          (ele) => ele.click()
        );
        gauge.message("Cart overlay exists and clicked on it.");
        gauge.screenshot();
        break;
      } else {
        gauge.message("The cart count value is 0, so reload the page.");
        await t.reload({ waitForEvents: ["loadEventFired"] });
        cartval++;
        if (cartval === 1) {
          await t.evaluate(
            await t.$(addToBagSPP, { waitForEvents: ["loadEventFired"] }),
            (ele) => ele.click()
          );
        }
      }
    } else {
      cartexists++;
    }
    if (cartval === parseInt(magicNumThree) || cartexists === parseInt(magicNumThree)) {
      gauge.message(
        "The shopping cart value is 0, so click the bag icon and browse to the shopping cart page."
      );
      await t.evaluate(
        await t.$(CartpageLink, { waitForEvents: ["loadEventFired"] }),
        (ele) => ele.click()
      );
    }
  }
}

/**
 * This function validates whether page navigated to SPP page or not
 * @param {string} SPPpageHeader
 */

async function validateInSPP(SPPpageHeader) {
  const tSppPageContent = await t.$(SPPpageHeader);
  if (await tSppPageContent.exists(pollingTime, existsTimeout)) {
    assert(matchCondition);
    gauge.message("In SPP");
  }
  else {
    gauge.message(`PDP is not loaded for t.${existsTimeout}`);
    assert(!matchCondition, `PDP is not loaded for t.${existsTimeout}`);
  }
}

/**
* This Function is used to click on the cart overlay depending upon the cart count value.
* @param {string} CartpageLink
*/


/**
* This Function is used to check whether product added exists in cart page or not by validating
* using emptycartmsg and cart URL.
* @param {string} emptycartmsg
*/
async function validateInCartPage(emptycartmsg) {

  var CPurl = await t.currentURL();
  if (CPurl.includes(cartPageURLText)) {
    gauge.message("Navigated to cart page as expected.");
    gauge.screenshot();
    if (await (await t.$(emptycartmsg)).exists(pollingTime, existsTimeout)) {
      await t.waitFor(waitTimeFiveK);
      gauge.message('No Product added to cart.');
      Noproductincart++;
      if (Noproductincart === 1) {
        gauge.message(commonMessages.validateCartMessage);
        assert(!matchCondition, commonMessages.validateCartMessageError);
      }
    } else {
      gauge.message('Product added to cart.');
    }
  } else {
    assert(!matchCondition, "Expected to be navigated to Cartpage but it is not.");
  }
}

async function federalEmulateDevice() {
  if (siteDefinition.executionContext.platform.toUpperCase() === 'MOBILE') {
    if (CommonData.FEDERALMOBILEDEVICE !== '') {
      await t.emulateDevice(CommonData.FEDERALMOBILEDEVICE);
      gauge.message(CommonData.FEDERALMOBILEDEVICE);
    }
  }
}

async function federalDocNumber() {
  if (enterFedralDocNumber !== '') {
    const currenturl = await t.currentURL();
    await t.openTab(federalGeneratorUrl);
    await federalEmulateDevice();
    await t.evaluate(t.button(generateFederalDocNumber), (ele) => ele.click());
    FederalDocNumber = await t.evaluate(() => {
      return document.getElementById("iid").value;
    });
    gauge.screenshot();
    gauge.message(FederalDocNumber);
    await t.switchTo(currenturl);
    await mobileEmulateDevice();
    // For few brands and locals there no need to enter the federal number for return user scenario, so that we are using try catch method.
    try {
      await t.write(FederalDocNumber, t.into(await t.$(enterFedralDocNumber)));
    } catch (e) {
      gauge.message("Federal Doc Number is not applicable and hence skipped.");
    }
    gauge.screenshot();
  }
}

async function creditCardNum1() {
  let creditCardValue = '';
  let tEnterCreditCardNumber = '';
  if (enterCreditCardNumber !== '') {
    tEnterCreditCardNumber = await t.$(enterCreditCardNumber);
    if (await tEnterCreditCardNumber.exists()) {
      const EnterCreditCardValue = CommonData.CREDITCARDNUMBER;
      creditCardValue = EnterCreditCardValue.split("");
      await t.write(creditCardValue, t.into(tEnterCreditCardNumber), { delay: delayTime });
      const creditCardNumValue = await t.textBox({ id: getCreditcardValue }).value();
      gauge.message("Credit Card Number: " + creditCardNumValue);
    }
  }
}

async function creditCardNum2() {
  let tEnterCcNumber = '';
  if (enterCcNumber !== '') {
    tEnterCcNumber = await t.$(enterCcNumber);
    if (await tEnterCcNumber.exists()) {
      await t.write(
        CommonData.CREDITCARDNUMBER,
        t.into(tEnterCcNumber),
        { delay: delayTime }
      );
      const creditCardNum2Value = await t.textBox({ id: getCreditcardValue }).value();
      gauge.message("Credit Card Number: " + creditCardNum2Value);
    }
  }
}

async function cvvNum() {
  let tEnterCvvNumber = '';
  if (enterCvvNumber !== '') {
    tEnterCvvNumber = await t.$(enterCvvNumber);
    if (await tEnterCvvNumber.exists()) {
      await t.write(CommonData.CVV, t.into(tEnterCvvNumber), { delay: delayTime });
    }
  }
}

async function creditCardIdNum() {
  let tCreditCardIdNumber = '';
  if (creditCardIdNumber !== '') {
    tCreditCardIdNumber = await t.$(creditCardIdNumber);
    if (await tCreditCardIdNumber.exists()) {
      await t.write(CommonData.CCIDNUMBER, t.into(tCreditCardIdNumber), {
        delay: delayTime,
      });
    }
  }
}

async function creditCardMonthYear() {
  let tEnterMonthYear = '';
  if (enterMonthYear !== '') {
    // For TR locals both PC and MOBILE having different functionlaity in payment page, so that we are using try catch method.
    tEnterMonthYear = await t.$(enterMonthYear);
    try {
      await t.write(CommonData.MONTHYEAR, t.into(tEnterMonthYear), {
        delay: delayTime,
      });
    } catch (e) {
      gauge.message(
        "Month and Year is not applicable for Mobile scripts and hence skipped."
      );
    }
  }
}

async function creditCardTextMonthAndYear() {
  let tEnterTextMonth = '';
  let tEnterTextYear = '';
  if (enterTextMonth !== '' || enterTextYear !== '') {
    // For TR locals both PC and MOBILE having different functionlaity in payment page, so that we are using try catch method.
    tEnterTextMonth = await t.$(enterTextMonth);
    tEnterTextYear = await t.$(enterTextYear);
    try {
      await t.write(CommonData.CCMONTH, t.into(tEnterTextMonth));
      await t.write(CommonData.YEAR, t.into(tEnterTextYear));
    } catch (e) {
      gauge.message(
        "Month & Year is not applicable for PC scripts and hence skipped."
      );
    }
  }
}

async function creditCardHolderName() {
  let tEnterCardHolderName = '';
  if (enterCardHolderName !== '') {
    tEnterCardHolderName = await t.$(enterCardHolderName);
    await t.write(CommonData.CARDHOLDERNAME, t.into(tEnterCardHolderName));
  }
}

async function creditCardMobileMonthYear() {
  let tSelectMobileMonth = '';
  let tselectMobileYear = '';
  if (selectMobileMonth !== '' || selectMobileYear !== '') {
    tSelectMobileMonth = await t.text(selectMobileMonth);
    tselectMobileYear = await t.text(selectMobileYear);
    await tSelectMobileMonth.exists();
    await tselectMobileYear.exists();
    await t.dropDown({ id: selectMobileMonth }).select(CommonData.CCMONTH);
    await t.dropDown({ id: selectMobileYear }).select(CommonData.YEAR);
  }
}

async function creditCardTermsCond() {
  let tPaymentTermsCond = '';
  if (paymentTermsCond !== '') {
    tPaymentTermsCond = await t.$(paymentTermsCond);
    await t.evaluate(tPaymentTermsCond, (ele) => ele.click());
  }
}

async function placeOrderCheck() {
  let tClickCreditCardContBtn = '';
  if (
    CommonData.toPlaceOrder === "TRUE" &&
    clickCreditCardContBtn !== ''
  ) {
    tClickCreditCardContBtn = await t.$(clickCreditCardContBtn);
    await t.evaluate(tClickCreditCardContBtn, (ele) => ele.click(), {
      waitForEvents: ["DOMContentLoaded"],
    });
    gauge.message("Placing the Order via Test Cards");
  } else {
    gauge.message(commonMessages.stepNotApplicable);
  }
}

async function creditCardDetailsandPlaceOrder() {
  if (creditCardDetails !== '') {
    await creditCardNum1();
    await creditCardNum2();
    await cvvNum();
    await creditCardIdNum();
    await creditCardMonthYear();
    await creditCardTextMonthAndYear();
    await creditCardHolderName();
    await creditCardMobileMonthYear();
    await creditCardTermsCond();
    CreditCardDetailsFlag = 1;
    gauge.screenshot();
  }

  if (entAdyenKbdCCDetails !== '') {
    let tEntAdyenKbdCCDetails = '';
    let EnterCreditCardValue = '';
    let creditCardValueAdyen = '';
    let enterMonthYearValue = '';
    let monthYearValue = '';
    let enterCvvValue = '';
    let cvvValue = '';

    tEntAdyenKbdCCDetails = await t.$(entAdyenKbdCCDetails);

    if (await tEntAdyenKbdCCDetails.exists(parseInt(pollingTime), parseInt(existsTimeout), { waitForEvents: ["DOMContentLoaded"] })) {
      EnterCreditCardValue = CommonData.CREDITCARDNUMBER;
      creditCardValueAdyen = EnterCreditCardValue.split("");
      enterMonthYearValue = CommonData.MONTHYEAR;
      monthYearValue = enterMonthYearValue.split("");
      enterCvvValue = CommonData.CVV;
      cvvValue = enterCvvValue.split("");
      await t.waitFor(parseInt(waitTimeFiveK));
      await t.press(creditCardValueAdyen, { delay: delayTime });
      await t.press(CommonData.TAB);
      await t.press(monthYearValue);
      await t.waitFor(parseInt(waitTimeThreeK));
      await t.press(cvvValue);
      await creditCardHolderName();
      await creditCardTermsCond();
      gauge.screenshot();
    }
    CreditCardDetailsFlag = 1;
  }

  if (entKbdCCDetails !== '') {
    let tEntKbdCCDetails = '';
    let EnterCreditCardValue = '';
    let creditCardValueKbdCC = '';
    let enterCvvValue = '';
    let cvvValue = '';
    tEntKbdCCDetails = await t.$(entKbdCCDetails);
    if (await tEntKbdCCDetails.exists(parseInt(pollingTime), parseInt(existsTimeout), { waitForEvents: ["DOMContentLoaded"] })) {
      EnterCreditCardValue = CommonData.CREDITCARDNUMBER;
      creditCardValueKbdCC = EnterCreditCardValue.split("");
      await t.press(creditCardValueKbdCC);
      await t.press("Tab");
      await t.press("Enter");
      for (let i = 0; i < parseInt(magicNumTwelve); i++) {
        await t.press("ArrowDown");
      }
      await t.press("Enter");
      await t.press("Tab");
      await t.press("Enter");
      for (let i = 0; i < parseInt(magicNumTen); i++) {
        await t.press("ArrowDown");
      }
      await t.press("Enter");
      await t.press("Tab");
      enterCvvValue = CommonData.CVV;
      cvvValue = enterCvvValue.split("");
      await t.press(cvvValue);
      await creditCardHolderName();
      gauge.screenshot();
    }
    CreditCardDetailsFlag = 1;
  }
  await placeOrderCheck();
  if (CreditCardDetailsFlag === 0) {
    gauge.message("As per the preference, not placing the order via Test Credit Cards, instead Placing Via COD");
  }
}

async function orderConfirmationMsg() {
  let tOrderConfirmationMsgid = '';
  let confirmurl = '';
  let GetOrderNumber = '';
  if (CommonData.toPlaceOrder === "TRUE" && orderConfirmationMsgid !== '') {
    tOrderConfirmationMsgid = await t.$(orderConfirmationMsgid);
    if (await tOrderConfirmationMsgid.exists(parseInt(pollingTime), parseInt(existsTimeout), { waitForEvents: ["DOMContentLoaded"] })) {
      assert(matchCondition);
      confirmurl = await t.currentURL();
      GetOrderNumber = await tOrderConfirmationMsgid.text();
      assert(confirmurl.includes(CommonData.CHECKOUTCONFIRMURL));
      gauge.message("Order Created successfully:" + GetOrderNumber);
    } else {
      assert(!matchCondition, "Order not Created");
    }
    gauge.screenshot();
  }
}

async function addProductFromRandomUrl() {
  await chooseHubSites();
  await gen.randomSkuOrProdCatFlow(
    randomSkuUrl,
    productLink,
    siteDefinition.executionContext.adminUrl,
    siteDefinition.executionContext.url,
    isShoppable,
    isDisplayable,
    sppUrl,
    noDisplayableProductError,
    productUrl,
    skuIds,
    addToBagSPP
  );

  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await validateInSPP(sppPageContent);
  }
  else {
    await validateInSPP(sppPageContentMob);
  }
  await cookiesRejectButton();
  await addProductTobagFromSPP();

  if (siteDefinition.executionContext.platform.toUpperCase() === 'PC') {
    await clickOnBagIcon(clickCartPageLink);
  } else {
    await clickOnBagIcon(clickCartPageLinkMob);
  }
}


async function validateAndReinitializeProduct() {
  await cookiesRejectButton();
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await validateInCartPage(emptyCartErrorMsgPC);
  } else {
    await validateInCartPage(emptyCartErrorMsgMob);
  }
}

async function accCreation(accConfirmAssert, accConfirmUrl, accMessage1, accMessage2) {
  if (
    CommonData.toPlaceOrder === "TRUE" &&
    accConfirmAssert !== ''
  ) {
    await gen.AssertUrl(accConfirmUrl, accMessage1, accMessage2);
    gauge.screenshot();
  }
}

async function removeProductFromCart() {
  let cartProdName = '';
  let tRemoveProduct = '';
  let tcartEmptyMsgId = '';
  if (removeProduct !== '') {
    cartProdName = await (await t.$(cartProductPath)).text();
    tRemoveProduct = await t.$(removeProduct);
    await t.evaluate(tRemoveProduct, (ele) => ele.click());
    gauge.screenshot();
  }
  tcartEmptyMsgId = await t.$(cartEmptyMsgId);
  if (await tcartEmptyMsgId.exists()) {
    await gen.AssertText(cartEmptyMsgId, CommonData.CARTEMPTYMSG, "Product removed from cart", "Product not removed from cart");
    gauge.message("Removed Product Name: " + cartProdName);
  }
}

async function selectQuantity() {
  if (selectQtyDropDown !== '') {
    await t.dropDown({ name: selectQtyDropDown }).select(CommonData.SelectQTY);
  }
  gauge.screenshot();
}

async function signOutAssert() {
  let tsignoutAssert = '';
  tsignoutAssert = await t.$(acSignoutAssert);
  if (await tsignoutAssert.exists()) {
    await gen.AssertText(acSignoutAssert, CommonData.SIGNOUTASSERT, "Sign Out is successfully", "Sign Out is not successfully");
  }
}

step('EMEAACCCHK Initialize Helix', async function () {
  // Initialize the selectors from DB
  await initFrameworkSettings();
});

step("EMEAACCCHK Verify that the user is able to set default cookies, revision-tags, test-order flags, and popups", async function () {
  await mobileEmulateDevice();
  await configureTestSettings();
  await closePopUps();
  await store();
}
);

step("EMEAACCCHK Verify that the user is able to add products to the cart", async function () {
  await addProductFromRandomUrl();
}
);

step("EMEAACCCHK Verify that the user is able to view and update the cart", async function () {
  await validateAndReinitializeProduct();
}
);

step("EMEAACCCHK Verify that the user is able to navigate to the sign-in page", async function () {
  await gen.ElementAction(chkoutContSampPage);
}
);

step("EMEAACCCHK Verify that the user is able to enter sign-in details", async function () {
  gauge.message("Generated Email: " + guestUserNewUserDetails[1].data);
  await gen.ElementAction(guestUserNewUserDetails);
}
);

step("EMEAACCCHK Verify that the user is able to enter the return user details", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(returnUserLoginLink);
    await gen.ElementAction(returnUserDetails);
    await gen.removeExcessProduct(removeProduct);
  } else {
    await gen.ElementAction(mobReturnUserLoginLink);
    await gen.ElementAction(returnUserDetails);
    await gen.removeExcessProduct(removeProduct);
  }

}
);

step("EMEAACCCHK Verify that the user is able to enter the <user> shipping details", async function (user) {
  if (user === "GuestUser" || user === "NewUser") {
    if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
      await federalDocNumber();
      await gen.ElementAction(shipAddrDetails);
      await gen.ElementAction(checkBoxShippingBillingAddress);
      await gen.ElementAction(guestShipContBtn);
    }
    else {
      await federalDocNumber();
      await gen.ElementAction(mobShipAddrDetails);
      await gen.ElementAction(checkBoxShippingBillingAddress);
      await gen.ElementAction(mobGuestShipContBtn);
    }
  }
  if (user === "ReturnUser") {
    if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
      await gen.ElementAction(cartMrgAddDet);
      await federalDocNumber();
      await gen.ElementAction(shipAddrDetails);
      await gen.ElementAction(retUserShipContBtn);
    }
    else {
      await gen.ElementAction(cartMrgAddDet);
      await federalDocNumber();
      await gen.ElementAction(mobShipAddrDetails);
      await gen.ElementAction(mobRetUserShipContBtn);
    }
  }
}
);

step("EMEAACCCHK Verify that the user is able to select the payment method for <user> and place an order", async function (user) {
  if (user === "GuestUser" || user === "NewUser") {
    if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
      await gen.ElementAction(orderRevPayDets);
      await creditCardDetailsandPlaceOrder();
      await orderConfirmationMsg();
    }
    else {
      await gen.ElementAction(mobOrderRevPayDets);
      await creditCardDetailsandPlaceOrder();
      await orderConfirmationMsg();
    }
  }

  if (user === "ReturnUser") {
    if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
      await gen.ElementAction(retUserCOReviewDets);
      await creditCardDetailsandPlaceOrder();
      await orderConfirmationMsg();
    }
    else {
      await gen.ElementAction(mobRetUserOrdRevPayDets);
      await creditCardDetailsandPlaceOrder();
      await orderConfirmationMsg();
    }
  }
}
);

step("EMEAACCCHK Verify that the user is able to enter new user details", async function () {
  await gen.ElementAction(newUsrSignInDetails);
});

step("EMEAACCCHK Verify that the user is able to create an account", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await accCreation(accountConfirmAssert, CommonData.ACCOUNTCONFIRMURL, commonMessages.acctCreatedSuccess, commonMessages.acctCreatedFail);
    gauge.screenshot();
  }
  else {
    await accCreation(mobAccountConfirmAssert, CommonData.MOBACCOUNTCONFIRMURL, commonMessages.acctCreatedSuccess, commonMessages.acctCreatedFail);
    gauge.screenshot();
  }
}
);

step("EMEAACCCHK Verify that the user is able to  view and perform updates on the cart page", async function () {
  await validateAndReinitializeProduct();
  await selectQuantity();
}
);

step("EMEAACCCHK Verify that the user is able to remove a product from the cart page", async function () {
  await removeProductFromCart();
});

// Account Steps
step("EMEAACCCHK Verify that the user is able to create a new account", async function () {
  await cookiesRejectButton();
  await chooseHubSites();
  await closePopUps();
  await cookiesRejectButton();
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(newAccRegDets);
  } else {
    await gen.ElementAction(accMobNewUserHamIconLinks);
    await gen.ElementAction(newUserMobRegDetails);
  }
});

step("EMEAACCCHK Verify that the user is able to add the account shipping details and sign out", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(accNewUserProfileLinks);
    await gen.ElementAction(accNewUserShipDetails);
    await gen.ElementAction(accAddrSubmitButton);
    await gen.ClickAction(acSignoutButton);
    await signOutAssert();
  } else {
    // await gen.ElementAction(accMobNewUserHamIconLinks);
    await gen.ElementAction(accMobNewUserHamMenuLinks);
    await gen.ElementAction(accNewUserShipDetails);
    await gen.ElementAction(mobAccAddAddrSubmitBtn);
    await gen.ElementAction(accMobNewUserHamLinks);
    await gen.ElementAction(accMobBackToProfileLink);
    await gen.ClickAction(acMobSignoutButton);
    await signOutAssert();
  }
});

step("EMEAACCCHK Verify that the user is able to login as a return user", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(accClickAlreadyUserLink);
    await gen.ElementAction(accRetUserDetails);
  } else {
    await gen.ElementAction(accMobClickAlreadyUserLink);
    await gen.ElementAction(accRetUserDetails);
    await gen.ElementAction(accMobNewUserHamLinks);
  }
});

step("EMEAACCCHK Verify that the return user is able to perform profile page actions", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(accProfFuncDetails);
    await gen.ElementAction(accNewUserShipDetails);
    await gen.ElementAction(stdDelChkBox);
    await gen.ElementAction(accRetUsrAddrSubmitButton);
  } else {
    await gen.ElementAction(accProfMyOrdDetails);
    await gen.ElementAction(accMobNewUserHamLinks);
    await gen.ElementAction(accMobBackToProfileLink);
    await gen.ElementAction(accMobShipLinks);
    await gen.ElementAction(accProfDeleteAddrDetails);
    await gen.ElementAction(accNewUserShipDetails);
    await gen.ElementAction(stdDelChkBox);
    await gen.ElementAction(mobAccAddAddrSubmitBtn);
  }

});

// This step is using by Analytics Team
step('EMEAACCCHK Go to SkuId and browse to SPP', async function () {
  await gen.gotoProdcat(
    siteDefinition.executionContext.adminUrl,
    siteDefinition.executionContext.url,
    skuIds,
    productUrl,
    isShoppable,
    isDisplayable,
    sppUrl,
    noDisplayableProductError
  );
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await validateInSPP(sppPageContent);
  }
  else {
    await validateInSPP(sppPageContentMob);
  }
});

// This step is using by Analytics Team
step("EMEAACCCHK In Analytics add the SPP product to your cart and verify it on the Cart page", async function () {
  await addProductTobagFromSPP();

  if (siteDefinition.executionContext.platform.toUpperCase() === 'PC') {
    await clickOnBagIcon(clickCartPageLink);
  } else {
    await clickOnBagIcon(clickCartPageLinkMob);
  }

  await validateAndReinitializeProduct();
});

step("EMEAACCCHK Verify that the return user is able to edit address details on the Profile page and sign out", async function () {
  if (siteDefinition.executionContext.platform.toUpperCase() === "PC") {
    await gen.ElementAction(AccountEditAddressDetails);
    await gen.ClickAction(acSignoutButton);
    await signOutAssert();
  } else {
    await gen.ElementAction(mobAccountEditAddressDetails);
    await gen.ElementAction(accMobNewUserHamLinks);
    await gen.ElementAction(accMobBackToProfileLink);
    await gen.ClickAction(acMobSignoutButton);
    await signOutAssert();
  }
});

// This step is using buy the regression team.
step("EMEAACCCHK Verify that the user is able to add two products to the cart", async function () {
  let counter = 0;
  let isShoppableValue = '';
  let isDisplayableValue = '';
  let tttProductUrl = '';
  let url = '';
  let nodisplayableProduct = '';
  for (let i = 0; i < skuIds.length; i++) {
    await t.goto(siteDefinition.executionContext.adminUrl + productUrl + skuIds[i], {
      waitForEvents: ["DOMContentLoaded"],
    });
    const tttIsShoppable = await t.$(isShoppable);
    const tttIsDisplayable = await t.$(isDisplayable);
    isShoppableValue = await tttIsShoppable.text();
    isDisplayableValue = await tttIsDisplayable.text();
    if (isShoppableValue === "1" && isDisplayableValue !== "0") {
      gauge.message(
        "The Product with SKU ID - " +
        skuIds[i] +
        " is available and proceeding to add to Cart"
      );
      tttProductUrl = await t.$(sppUrl);
      if (await tttProductUrl.exists(parseInt(pollingTime), parseInt(existsTimeout))) {
        url = await tttProductUrl.text();
        gauge.message(url);
        await t.goto(siteDefinition.executionContext.url + url, {
          waitForEvents: ["DOMContentLoaded"],
        });
        gauge.screenshot();
        await cookiesRejectButton();
        await addProductTobagFromSPP();
        counter++;
        gauge.screenshot();
        if (counter === 2) {
          break;
        }
      } else {
        nodisplayableProduct = await (await t.$(noDisplayableProductError)).text();
        gauge.message(nodisplayableProduct);
      }
    } else {
      gauge.message(
        "The Product with SKU ID - " +
        skuIds[i] +
        " is NOT available for adding it to Cart "
      );
      notAvailableProductsCount++;
    }
  }
  if (notAvailableProductsCount === skuIds.length) {
    assert(!matchCondition, "None of the products are available for adding it to Cart");
  }
});
